# Generated by Console GUI

log_format comm '$remote_addr - $remote_user [$time_local] "$request" '
  '$status $body_bytes_sent "$http_referer" "$http_user_agent" "$upstream_addr"';

upstream university_sesh_top {
  server 172.28.0.4:80;
}

upstream stats {
  server 127.0.0.1:3333;
}

server {
  server_name university.sesh.top;
  location / {
    return 301 https://krsuajy.sesh.top/;
    access_log /var/log/nginx/comm.log comm;
  }
  ssl_certificate /etc/letsencrypt/live/sesh.top/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/sesh.top/privkey.pem;
  listen 443 ssl;
}

server {
  server_name krsuajy.sesh.top;
  location / {
    proxy_pass http://university_sesh_top;
    access_log /var/log/nginx/comm.log comm;
  }
  ssl_certificate /etc/letsencrypt/live/sesh.top/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/sesh.top/privkey.pem;
  listen 443 ssl;
}

server {
  server_name stats.sesh.top;
  location / {
    proxy_pass http://stats/;
    access_log /var/log/nginx/comm.log comm;
  }
  ssl_certificate /etc/letsencrypt/live/sesh.top/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/sesh.top/privkey.pem;
  listen 443 ssl;
}
